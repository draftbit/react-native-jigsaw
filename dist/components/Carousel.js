"use strict";exports.__esModule=!0,exports.SEED_DATA=exports.default=void 0;var _react=_interopRequireDefault(require("react")),_reactNative=require("react-native"),_Image=_interopRequireDefault(require("./Image")),_Elevation=_interopRequireDefault(require("./Elevation")),_theming=require("../core/theming"),_componentTypes=require("../core/component-types"),_Config=_interopRequireDefault(require("./Config"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}class Carousel extends _react.default.PureComponent{constructor(a){super(a),this.state={},this.handleScroll=a=>{this.setState({scrollOffset:a.nativeEvent.contentOffset.x})},this.onPageLayout=a=>{const{width:b}=a.nativeEvent.layout;this.setState({width:b})},this.state={scrollOffset:0}}render(){const{images:a,aspectRatio:b,swiperPalette:c,resizeMode:d,dotColor:e,theme:f,style:g}=this.props,{colors:h,spacing:j}=f,{width:k}=this.state;return _react.default.createElement(_reactNative.View,{style:[styles.container,{aspectRatio:b},g],onLayout:this.onPageLayout},_react.default.createElement(_reactNative.ScrollView,{onScroll:this.handleScroll,horizontal:!0,pagingEnabled:!0,showsHorizontalScrollIndicator:!1,scrollEventThrottle:16},a.map((a,c)=>{const e={width:k};return b?e.aspectRatio=b:e.flex=1,_react.default.createElement(_reactNative.View,{style:[styles.slidingPanel,{width:k}],key:c},_react.default.createElement(_Image.default,{source:"string"==typeof a?{uri:a}:a,resizeMode:d,style:{width:k,flex:1,aspectRatio:b}}))})),_react.default.createElement(_reactNative.View,{style:[styles.swipeNavWrapper,{bottom:j.large}]},_react.default.createElement(_reactNative.View,{style:styles.swipeNav},Array.from({length:a.length},(a,b)=>{const d=this.state.scrollOffset/k,f=d>=b-.5&&d<b+.5;let g;return g=e?e:"surface"===c?f?h.strong:h.light:f?h.background:h.surface,_react.default.createElement(_Elevation.default,{key:b,style:[{backgroundColor:g,marginHorizontal:j.small/2},styles.dot,f?styles.activeDot:null]})}))))}}Carousel.defaultProps={images:[_Config.default.placeholderImageURL,_Config.default.placeholderImageURL,_Config.default.placeholderImageURL,_Config.default.placeholderImageURL,_Config.default.placeholderImageURL,_Config.default.placeholderImageURL,_Config.default.placeholderImageURL],resizeMode:"cover",style:{height:250}};const styles=_reactNative.StyleSheet.create({container:{alignSelf:"stretch"},slidingPanel:{alignItems:"center",justifyContent:"center"},swipeNavWrapper:{position:"absolute",justifyContent:"center",alignItems:"center",left:0,right:0},swipeNav:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},dot:{opacity:.5,width:_Config.default.swiperInactiveDotSize,height:_Config.default.swiperInactiveDotSize,borderRadius:_Config.default.swiperInactiveDotSize},activeDot:{opacity:1,elevation:1,width:_Config.default.swiperActiveDotSize,height:_Config.default.swiperActiveDotSize,borderRadius:_Config.default.swiperActiveDotSize}});var _default=(0,_theming.withTheme)(Carousel);exports.default=_default;const SEED_DATA=[{name:"Carousel",tag:"Carousel",category:_componentTypes.COMPONENT_TYPES.blocks,description:"A horizontal scrolling carousel of images",preview_image_url:"{CLOUDINARY_URL}/Carousel.png",supports_list_render:!1,layout:{height:250},props:{images:{label:"Images",description:"A series of images to display in the carousel",editable:!0,type:_componentTypes.FORM_TYPES.localImageArray,value:null},resizeMode:{label:"Resize Mode",description:"Determines how to resize the images when the frame doesn't match the raw image dimensions",editable:!0,required:!1,value:"cover",type:_componentTypes.FORM_TYPES.flatArray,options:["cover","contain","stretch","repeat","center"]},dotColor:{label:"Dot Color",description:"Color of the carousel's dots",editable:!0,required:!0,value:"strong",type:_componentTypes.FORM_TYPES.color}}}];exports.SEED_DATA=SEED_DATA;